{
  "title": "National Public Transport Access Nodes (NaPTAN) - Coach Stations",
  "dataset": "https://data.gov.uk/dataset/naptan",
  "geo": true,
  "fields": [
    {
      "type": "string",
      "name": "atcocode"
    },
    {
      "type": "string",
      "name": "nationalcoachcode"
    },
    {
      "type": "string",
      "name": "name"
    },
    {
      "type": "USER-DEFINED",
      "name": "ospoint"
    },
    {
      "type": "USER-DEFINED",
      "name": "latlong"
    }
  ],
  "tablename": "naptan_coach_stations",
  "theme": "transport",
  "queries": [
    {
      "query": "select * from naptan_coach_stations order by ST_Distance(LatLong, ST_SetSRID(ST_MakePoint($1, $2), 4326));",
      "description": "Find coach stations closest to a lat/lon point",
      "name": "nearest",
      "fields": [
        {
          "type": "float",
          "name": "lat"
        },
        {
          "type": "float",
          "name": "lon"
        }
      ]
    },
    {
      "query": "select * from naptan_coach_stations where LatLong && ST_MakeEnvelope($1, $2, $3, $4, 4326);",
      "description": "Find coach stations within a region",
      "name": "extent",
      "fields": [
        {
          "type": "float",
          "name": "top-left-lat"
        },
        {
          "type": "float",
          "name": "top-left-lon"
        },
        {
          "type": "float",
          "name": "bottom-right-lat"
        },
        {
          "type": "float",
          "name": "bottom-right-lon"
        }
      ]
    },
    {
      "query": "select * from naptan_coach_stations where ST_DISTANCE((select latlong from codepoint where postcode = normalise_postcode($1)), latlong) < $2;",
      "description": "Find ferry ports near to a postcode",
      "name": "postcode",
      "fields": [
        {
          "type": "string",
          "name": "postcode"
        },
        {
          "type": "integer",
          "name": "distance"
        }
      ]
    }
  ],
  "id": "naptan_coach_stations",
  "choice_fields": null
}