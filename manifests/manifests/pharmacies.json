{
  "title": "Information about pharmacies",
  "dataset": "https://data.gov.uk/dataset/pharmacies",
  "geo": true,
  "fields": [],
  "indexes": ["partial_postcode", "name"],
  "tablename": "pharmacies",
  "theme": "health",
  "queries": [
    {
      "query": "select * from pharmacies where LOWER(partial_postcode) = LOWER($1)",
      "description": "Find pharmacies using just a partial postcode  (e.g. CH64, or L1)",
      "name": "partial_postcode",
      "fields": [
        {
          "type": "string",
          "name": "partial_postcode",
          "default": "M1"
        }
      ]
    },
    {
      "query": "select * from pharmacies where LOWER(name) ILIKE '%' || LOWER($1) || '%'",
      "description": "Find pharmacies by name",
      "name": "name",
      "fields": [
        {
          "type": "string",
          "name": "name",
          "default": "Deeside"
        }
      ]
    },
    {
      "query": "select * from pharmacies order by ST_Distance(LatLong, ST_SetSRID(ST_MakePoint($2, $1), 4326));",
      "description": "Find pharmacies closest to a lat/lon point",
      "name": "nearest",
      "fields": [
        {
          "type": "float",
          "name": "lat",
          "default": "53.1"
        },
        {
          "type": "float",
          "name": "lon",
          "default": "3.0"
        }
      ]
    }
  ],
  "id": "pharmacies",
  "choice_fields": [
    "city",
    "county"
  ]
}